<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Worker's Registration Form</title>
    <meta name="viewport" content="width=device-width,
      initial-scale=1.0"/>
    <link rel="stylesheet" href="style.css" />
    
  </head>
  <body>
    <div class="container">
      <h1 class="form-title">Worker's Registration</h1>
      <form action="#" id = "form" >

        <div class="main-user-info">
          <div class="user-input-box">
            <label for = "Face Sample"> Verification </label>
            <button id="open-camera-btn" onclick="openCameraPopup()">Take Sample</button>
            </div>
          <div class="user-input-box">
            <label for="fullName">Full Name</label>
            <input type="text"
                    id="name"
                    name="name"
                    placeholder="Enter Full Name"/>
          </div>
          <div class="user-input-box">
            <label for="Worker's Id">Worker's Id</label>
            <input type="text"
                    id="w_id"
                    name="w_id"
                    placeholder="Enter Worker's Id"/>
          </div>
          <div class="user-input-box">
            <label for="mobileNumber">Mobile Number</label>
            <input type="text"
                    id="mobileNumber"
                    name="mobileNumber"
                    placeholder="Enter Phone Number" required/>
          </div>
          <div class="user-input-box">
            <label for="Aadhar Card">Aadhar Card No</label>
            <input type="text"
                    id="aadharNo"
                    name="aadharNo"
                    placeholder="Enter Aadhar Card"/>
          </div>
          <div class="user-input-box">
            <label for="Birth Date">Birth Date</label>
            <input type="text"
                    id="birth_date"
                    name="birth_date"
                    placeholder="Birth Date"/>
          </div>
          <div class="user-input-box">
            <label for="Address">Address</label>
            <input type="text"
                    id="address"
                    name="address"
                    placeholder="Address"/>
          </div>
          <div class="user-input-box">
        <label for="file1">Face Sample 1:</label>
        <input type="file" name="File1" id="file1">
        </div>
        <div class="user-input-box">
        <label for="file2">Face Sample 2:</label>
        <input type="file" name="File2" id="file2">
        </div>
        <div class="user-input-box">
        <label for="file3">Face Sample 3:</label>
        <input type="file" name="File3" id="file3">
        </div>
      
        <div class="form-submit-btn">
          <input type="submit" id="submit" value="Register" onclick="send()" >
         
        </div>
      </form> 
      
    </div>
    <script>
      function send() {
        document.getElementById("form").addEventListener("submit", async function(event) {
          event.preventDefault();
          const formData = new FormData(this);
          const response = await fetch("http://localhost:3000/api/worker/signup", {
              method: "POST",
              body: formData,
              success: function(response) {
                if (response.success) {
                    // If SMS sent successfully, show pop-up message
                    console.alert('SMS message sent successfully!');
                } else {
                    // Handle error scenario if needed
                    console.alert('Failed to send SMS message!');
                }
            }
          });
          const data = await response.json();
          console.log(data);
      });
    }
  </script> 
  </body>
  <script src="./Open Camera/camera.js"></script>
  <script src="./Open Camera/cscript.js"></script>
</html>